@using BabyInABagServer.Models
@model IEnumerable<Product>

@{
    ViewBag.Title = "Checkout";
}

<!-- FAQ Section -->
<div class="w3-container w3-padding-small">
    <h2 class="w3-border-bottom w3-border-light-grey w3-padding-16">Checkout</h2>
</div>
@{
    double subtotal = (double)ViewBag.Subtotalprice;
}

<!--        product 1-->
@foreach (var item in Model)
{
    <div id="productDiv" class="w3-panel w3-border w3-round-xlarge" style="width: 70%">

        <div class="w3-row">

            <div class="w3-col w3-container m4 l3 ">
                <img id="image1" src="@item.Product_Image" alt="@item.Product_Image">
            </div>
            <div class="w3-col w3-container m8 l9">
                <h2>@Html.DisplayFor(modelItem => item.Product_Name)</h2>


                <div id="pright">
                    <h4 id="cprice">$@Html.DisplayFor(modelItem => item.Product_Price)</h4>
                </div>
            </div>
        </div>
    </div>
}

<div style="margin-left:15%; margin-top: 3%;">
    <div>
        <p><b>Subtotal:</b> $@subtotal</p>
    </div>
</div>


<div style="text-align: center">
    <div id="paypal-button-container"></div>
    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
    <script>
        // Render the PayPal button
        paypal.Button.render({
            // Set your environment
            env: 'sandbox', // sandbox | production

            // Specify the style of the button
            style: {
                layout: 'vertical',  // horizontal | vertical
                size: 'medium',    // medium | large | responsive
                shape: 'rect',      // pill | rect
                color: 'gold'       // gold | blue | silver | white | black
            },

            // Specify allowed and disallowed funding sources
            //
            // Options:
            // - paypal.FUNDING.CARD
            // - paypal.FUNDING.CREDIT
            // - paypal.FUNDING.ELV
            funding: {
                allowed: [
                    paypal.FUNDING.CARD,
                    paypal.FUNDING.CREDIT
                ],
                disallowed: []
            },

            // PayPal Client IDs - replace with your own
            // Create a PayPal app: https://developer.paypal.com/developer/applications/create
            client: {
                sandbox: 'AZDxjDScFpQtjWTOUtWKbyN_bDt4OgqaF4eYXlewfBP4-8aqX3PiV8e1GWU6liB2CUXlkA59kJXE7M6R',
                production: '<insert production client id>'
            },

            payment: function (data, actions) {
                return actions.payment.create({
                    payment: {
                        transactions: [
                            {
                                amount: {
                                    total: '0.01',
                                    currency: 'USD'
                                }
                            }
                        ]
                    }
                });
            },

            onAuthorize: function (data, actions) {
                return actions.payment.execute()
                    .then(function () {
                        window.alert('Payment Complete!');
                    });
            }
        }, '#paypal-button-container');
    </script>
</div>