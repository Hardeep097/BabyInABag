@using BabyInABagServer.Models
@using System.Configuration
@model IEnumerable<Product>

@{
    ViewBag.Title = "Checkout";
}

<!-- FAQ Section -->
<div class="w3-container w3-padding-small">
    <h2 class="w3-border-bottom w3-border-light-grey w3-padding-16">Checkout</h2>
</div>
@{
    int i = 1;
    double subtotal = (double)ViewBag.Subtotalprice;
}

<!--        product 1-->
@foreach (var item in Model)
{
    <div id="productDiv" class="w3-panel w3-border w3-round-xlarge" style="width: 70%">

        <div class="w3-row">

            <div class="w3-col w3-container m4 l3 ">
                <img id="image1" src="@item.Product_Image" alt="@item.Product_Image">
            </div>
            <div class="w3-col w3-container m8 l9">
                <h2>@Html.DisplayFor(modelItem => item.Product_Name)</h2>


                <div id="pright">
                    <h4 id="cprice">$@Html.DisplayFor(modelItem => item.Product_Price)</h4>
                </div>
            </div>
        </div>
    </div>
}

<div style="margin-left:15%; margin-top: 3%;">
    <div>
        <p><b>Subtotal:</b> $@subtotal</p>
    </div>
</div>


<form action="@ConfigurationManager.AppSettings["urlSubmitPayment"]">
    <input type="hidden" name="cmd" value="_cart" />
    <input type="hidden" name="upload" value="1" />
    <input type="hidden" name="return" value="@ConfigurationManager.AppSettings["urlReturn"]" />
    <input type="hidden" name="business" value="@ConfigurationManager.AppSettings["accountBusiness"]" />
    @foreach (var item in Model)
    {
        <input type="hidden" name="@Url.Content("item_name_" + i)" value="@item.Product_Name" />
        <input type="hidden" name="@Url.Content("item_number_" + i)" value="@item.Product_Id" />
        <input type="hidden" name="@Url.Content("amount_" + i)" value="@item.Product_Price" />
        <input type="hidden" name="@Url.Content("quantity_" + i)" value="@item.Quantity" />
        i++;
        
    }
    <div>
        <input type="submit" value="Pay Now" />
    </div>
</form>